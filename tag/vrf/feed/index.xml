<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>vrf &#8211; RSNET.PL</title>
	<atom:link href="https://kubsoo.github.io/rsnet-website/tag/vrf/feed/" rel="self" type="application/rss+xml" />
	<link>https://kubsoo.github.io/rsnet-website/</link>
	<description>wszystko o sieciach komputerowych</description>
	<lastBuildDate>Sat, 22 Feb 2020 11:40:47 +0000</lastBuildDate>
	<language>pl-PL</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.9.8</generator>
	<item>
		<title>VRF lite CISCO podstawy</title>
		<link>https://kubsoo.github.io/rsnet-website/vrf-lite-cisco-podstawy/</link>
		<comments>https://kubsoo.github.io/rsnet-website/vrf-lite-cisco-podstawy/#respond</comments>
		<pubDate>Fri, 06 Oct 2017 17:52:16 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Poradnik]]></category>
		<category><![CDATA[cisco]]></category>
		<category><![CDATA[vrf]]></category>

		<guid isPermaLink="false">https://kubsoo.github.io/rsnet-website/?p=578</guid>
		<description><![CDATA[VRF (Virtual routing and forwarding) to technologia, która umożliwia podzielenie routera na logiczne routery, z których każdy posiada osobną tablicę routingu. Dzięki temu możliwe jest używanie tej samej adresacji na&#46;&#46;&#46;]]></description>
				<content:encoded><![CDATA[		<div class="elementor elementor-578">
			<div class="elementor-inner">
				<div class="elementor-section-wrap">
							<section data-id="7420449" class="elementor-element elementor-element-7420449 elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-section elementor-top-section" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
				<div class="elementor-row">
				<div data-id="0395283" class="elementor-element elementor-element-0395283 elementor-column elementor-col-100 elementor-top-column" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
					<div class="elementor-widget-wrap">
				<div data-id="56bc270" class="elementor-element elementor-element-56bc270 elementor-widget elementor-widget-text-editor" data-element_type="text-editor.default">
				<div class="elementor-widget-container">
					<div class="elementor-text-editor elementor-clearfix"><p style="text-align: justify;"><span style="color: #333333;"><a href="https://en.wikipedia.org/wiki/Virtual_routing_and_forwarding" title="">VRF</a> (Virtual routing and forwarding) to technologia, która umożliwia podzielenie routera na logiczne routery, z których każdy posiada osobną tablicę routingu. Dzięki temu możliwe jest używanie tej samej adresacji na różnych interfejsach. Działa to podobnie jak vlany na switchach. W przypadku vlanów przypisujemy interfejs do odpowiedniego vlanu, natomiast w przypadku vrf przypisujemy interfejs do odpowiedniego vrf&#8217;a.</span></p><p style="text-align: justify;"><span style="color: #333333;">W poniższym przykładzie pokażę jak skonfigurować VRF na routerach CISCO.</span></p><h4> </h4><h4><span style="color: #333333;"><strong>PRZYKŁAD</strong></span></h4><p style="text-align: justify;"><span style="color: #333333;">Załóżmy że mamy jesteśmy operatorem sieciowym (ISP), który świadczy usługi dla firmy ALFA i BETA. Obie firmy posiadają dwa oddziały (centralę HQ i oddział zdalny). ISP ma zapewnić łączność pomiędzy oddziałami dla obu firm i ma to zrobić w taki sposób żeby sieć firmy ALFA była odseparowana od sieci firmy BETA. Dodatkowo firma ALFA jak i firma BETA korzystają z tych samych adresacji. Operator może zakupić dwa routery i na jednym świadczyć usługi dla firmy ALFA a na drugim dla firmy BETA, jednak lepszym rozwiązaniem będzie zastosowanie VRF, które spełnią wymagania obu firm i nie wymagają dodatkowego sprzętu.</span></p><p style="text-align: justify;"><span style="color: #333333;">Topologia sieci wygląda następująco:</span></p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="7db6565" class="elementor-element elementor-element-7db6565 elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-section elementor-top-section" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
				<div class="elementor-row">
				<div data-id="92e7ddf" class="elementor-element elementor-element-92e7ddf elementor-column elementor-col-100 elementor-top-column" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
					<div class="elementor-widget-wrap">
				<div data-id="ab014f0" class="elementor-element elementor-element-ab014f0 elementor-widget elementor-widget-image" data-element_type="image.default">
				<div class="elementor-widget-container">
					<div class="elementor-image">
											<a href="https://kubsoo.github.io/rsnet-website/wp-content/uploads/2017/11/vrf2.png" data-elementor-open-lightbox="yes" data-rel="lightbox-image-0" data-rl_title="" data-rl_caption="" title="">
							<img width="720" height="512" src="https://kubsoo.github.io/rsnet-website/wp-content/uploads/2017/11/vrf2-1024x728.png" class="attachment-large size-large" alt="" srcset="https://kubsoo.github.io/rsnet-website/wp-content/uploads/2017/11/vrf2-1024x728.png 1024w, https://kubsoo.github.io/rsnet-website/wp-content/uploads/2017/11/vrf2-300x213.png 300w, https://kubsoo.github.io/rsnet-website/wp-content/uploads/2017/11/vrf2-768x546.png 768w, https://kubsoo.github.io/rsnet-website/wp-content/uploads/2017/11/vrf2.png 1110w" sizes="(max-width: 720px) 100vw, 720px" />								</a>
											</div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="6338fb7" class="elementor-element elementor-element-6338fb7 elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-section elementor-top-section" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
				<div class="elementor-row">
				<div data-id="7c89423" class="elementor-element elementor-element-7c89423 elementor-column elementor-col-100 elementor-top-column" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
					<div class="elementor-widget-wrap">
				<div data-id="7353074" class="elementor-element elementor-element-7353074 elementor-widget elementor-widget-text-editor" data-element_type="text-editor.default">
				<div class="elementor-widget-container">
					<div class="elementor-text-editor elementor-clearfix"><hr /><h4>ALFA</h4><p><span style="color: #333333;">Konfiguracja &#8211; ALFA_HQ</span></p><pre><span style="color: #333333;">interface Loopback0</span><br /><span style="color: #333333;"> ip address 4.4.4.4 255.255.255.255</span><br /><span style="color: #333333;">!</span><br /><span style="color: #333333;">interface FastEthernet0/0</span><br /><span style="color: #333333;"> ip address 192.168.0.2</span> 255.255.255.0</pre><p><span style="color: #333333;">Konfiguracja &#8211; ALFA_1</span></p><pre><span style="color: #333333;">interface Loopback0<br /> ip address 2.2.2.2 255.255.255.255<br />!<br />interface FastEthernet0/0<br /> ip address 192.168.1.2<br /></span></pre><h4>BETA</h4><p><span style="color: #333333;">Konfiguracja &#8211; BETA_HQ</span></p><pre><span style="color: #333333;">interface Loopback0<br /> ip address 5.5.5.5 255.255.255.255<br />!<br />interface FastEthernet0/0<br /> ip address 192.168.0.2</span></pre><p><span style="color: #333333;">Konfiguracja &#8211; BETA_1</span></p><pre><span style="color: #333333;">interface Loopback0<br /> ip address 3.3.3.3 255.255.255.255<br />!<br />interface FastEthernet0/0<br /> ip address 192.168.1.2</span></pre></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
				<section data-id="8e1434b" class="elementor-element elementor-element-8e1434b elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-section elementor-top-section" data-element_type="section">
						<div class="elementor-container elementor-column-gap-default">
				<div class="elementor-row">
				<div data-id="dbf64d2" class="elementor-element elementor-element-dbf64d2 elementor-column elementor-col-100 elementor-top-column" data-element_type="column">
			<div class="elementor-column-wrap elementor-element-populated">
					<div class="elementor-widget-wrap">
				<div data-id="36a4aa8" class="elementor-element elementor-element-36a4aa8 elementor-widget elementor-widget-text-editor" data-element_type="text-editor.default">
				<div class="elementor-widget-container">
					<div class="elementor-text-editor elementor-clearfix"><hr /><h4>ISP<span style="color: #333333;"> VRF</span></h4><p style="text-align: justify;"><span style="color: #333333;">Konfigurację ISP zaczniemy od skonfigurowania interfejsów do których podłączone są oddziały Alfa_HQ (fa0/0) i Beta_HQ(fa1/0):</span></p><pre><span style="color: #333333;">ISP(config)#int fastEthernet 0/0</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#no sh</span><br /><span style="color: #333333;">ISP(config-if)#exit</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 1/0</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span><br /><span style="color: #333333;"><strong>% 192.168.0.0 overlaps with FastEthernet0/0</strong></span></pre><div style="text-align: justify;"><span style="color: #333333;">Próba skonfigurowania interfejsu FastEthernet1/0 kończy się niepowodzeniem. Dostaliśmy informację, że podsieć 192.168.0.0 pokrywa się z interfejsem FastEthernet0/0. Skonfigurujmy więc VRFy i zobaczmy co się stanie jak jeszcze raz będziemy konfigurować te same adresy IP na interfejsach. VRFy konfigurujemy w global config, wydając komendę: <strong>ip vrf NAZWA_VRFu</strong></span></div><pre style="text-align: justify;"><span style="color: #333333;">ISP(config)#ip vrf BETA</span><br /><span style="color: #333333;">ISP(config-vrf)#exit</span><br /><span style="color: #333333;">ISP(config)#ip vrf ALFA</span></pre><p style="text-align: justify;"><span style="color: #333333;">Teraz musimy podpiąć interfejs pod VRF, służy do tego komenda: <strong>ip vrf forwarding NAZWA_VRFu </strong>(Uwaga: dodanie interfejsu do VRF skutkuje usunięciem adresu IP z intefejsu, należy o tym pamiętać przed konfiguracją VRFu na interfejsie):</span></p><pre><span style="color: #333333;">ISP(config)#int fastEthernet 0/0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf for</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding ALFA</span><br /><span style="color: #333333;">% Interface FastEthernet0/0 IPv4 disabled and address(es) removed due to enabling VRF ALFA</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 1/0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf for</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding BETA</span></pre><p style="text-align: justify;"><span style="color: #333333;">Spróbujmy teraz skonfigurować adresy IP na interfejsach fa0/0 i fa1/0:</span></p><pre><span style="color: #333333;">ISP(config)#int fastEthernet 0/0</span><br /><span style="color: #333333;">ISP(config-if)#ip ad</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#no sh</span><br /><span style="color: #333333;">ISP(config-if)#exit</span><br /><span style="color: #333333;">ISP(config)#int fa</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 1/0</span><br /><span style="color: #333333;">ISP(config-if)#ip add</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span></pre><p style="text-align: justify;"><span style="color: #333333;">Jak widać dzięki zastosowaniu VRFów mogliśmy skonfigurować te same adresy IP na dwóch różnych intefejsach. </span></p><p><span style="color: #333333;">Pełna konfiguracja routera ISP wygląda następująco:</span></p><pre><span style="color: #333333;">ISP(config)#int fastEthernet 0/0</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding ALFA</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 0/1</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.1.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding ALFA</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 0/0</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding ALFA</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 1/0</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.0.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding BETA</span><br /><span style="color: #333333;">ISP(config)#int fastEthernet 1/1</span><br /><span style="color: #333333;">ISP(config-if)#ip address 192.168.1.1 255.255.255.0</span><br /><span style="color: #333333;">ISP(config-if)#ip vrf forwarding BETA</span></pre><p style="text-align: justify;"><span style="color: #333333;">Sprawdźmy jak wyglądają interfejsy na routerze:</span></p><pre><span style="color: #333333;">ISP#show ip int brief</span><br /><span style="color: #333333;">Interface IP-Address OK? Method Status Protocol</span><br /><span style="color: #333333;">FastEthernet0/0 192.168.0.1 YES manual up up</span><br /><span style="color: #333333;">FastEthernet0/1 192.168.1.1 YES manual up up</span><br /><span style="color: #333333;">FastEthernet1/0 192.168.0.1 YES manual up up</span><br /><span style="color: #333333;">FastEthernet1/1 192.168.1.1 YES manual up up</span></pre><p style="text-align: justify;"><span style="color: #333333;">Przetestujmy łączność z ISP do ALFA i BETA. Komenda ping przy VRF różni się nieznacznie od zwykłej komendy, składania wygląda następująco <strong>ping vrf NAZWA_VRF ip_addres</strong>s:</span></p><pre><span style="color: #333333;">ISP#ping vrf ALFA 192.168.1.2</span><br /><span style="color: #333333;">Type escape sequence to abort.</span><br /><span style="color: #333333;">Sending 5, 100-byte ICMP Echos to 192.168.1.2, timeout is 2 seconds:</span><br /><span style="color: #333333;">!!!!!</span><br /><span style="color: #333333;">Success rate is 100 percent (5/5), round-trip min/avg/max = 16/22/28 ms</span><br /><span style="color: #333333;">ISP#ping vrf ALFA 192.168.0.2</span><br /><span style="color: #333333;">Type escape sequence to abort.</span><br /><span style="color: #333333;">Sending 5, 100-byte ICMP Echos to 192.168.0.2, timeout is 2 seconds:</span><br /><span style="color: #333333;">.!!!!</span><br /><span style="color: #333333;">Success rate is 80 percent (4/5), round-trip min</span><br /><br /><span style="color: #333333;">Success rate is 80 percent (4/5), round-trip min/avg/max = 28/30/32 ms</span><br /><span style="color: #333333;">ISP#ping vrf BETA 192.168.1.2</span><br /><span style="color: #333333;">Type escape sequence to abort.</span><br /><span style="color: #333333;">Sending 5, 100-byte ICMP Echos to 192.168.1.2, timeout is 2 seconds:</span><br /><span style="color: #333333;">.!!!!</span><br /><span style="color: #333333;">Success rate is 80 percent (4/5), round-trip min/avg/max = 1/11/28 ms</span></pre><p><span style="color: #333333;">Zobaczmy jak wygląda tablica routingu na routerze ISP:</span></p><pre><span style="color: #333333;">ISP#show ip route</span><br /><span style="color: #333333;">Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP</span><br /><span style="color: #333333;"> D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area</span><br /><span style="color: #333333;"> N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br /><span style="color: #333333;"> E1 - OSPF external type 1, E2 - OSPF external type 2</span><br /><span style="color: #333333;"> i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2</span><br /><span style="color: #333333;"> ia - IS-IS inter area, * - candidate default, U - per-user static route</span><br /><span style="color: #333333;"> o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP</span><br /><span style="color: #333333;"> + - replicated route, % - next hop override</span><br /><br /><span style="color: #333333;">Gateway of last resort is not set</span></pre><p style="text-align: justify;"><span style="color: #333333;">Jest ona pusta, ponieważ każdy interfejs routera jest w VRF. Wyświetlmy teraz tablice routingów dla obu VRFów:</span></p><h5><span style="color: #333333;"><strong>VRF ALFA</strong></span></h5><pre><span style="color: #333333;">ISP#show ip route vrf ALFA</span><br /><br /><span style="color: #333333;">Routing Table: ALFA</span><br /><span style="color: #333333;">Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP</span><br /><span style="color: #333333;"> D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area</span><br /><span style="color: #333333;"> N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br /><span style="color: #333333;"> E1 - OSPF external type 1, E2 - OSPF external type 2</span><br /><span style="color: #333333;"> i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2</span><br /><span style="color: #333333;"> ia - IS-IS inter area, * - candidate default, U - per-user static route</span><br /><span style="color: #333333;"> o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP</span><br /><span style="color: #333333;"> + - replicated route, % - next hop override</span><br /><br /><span style="color: #333333;">Gateway of last resort is not set</span><br /><br /><span style="color: #333333;">192.168.0.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.0.0/24 is directly connected, FastEthernet0/0</span><br /><span style="color: #333333;">L 192.168.0.1/32 is directly connected, FastEthernet0/0</span><br /><span style="color: #333333;"> 192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.1.0/24 is directly connected, FastEthernet0/1</span><br /><span style="color: #333333;">L 192.168.1.1/32 is directly connected, FastEthernet0/1</span></pre><h5><strong>VRF BETA</strong></h5><pre><span style="color: #333333;">ISP#show ip route vrf BETA</span><br /><br /><span style="color: #333333;">Routing Table: BETA</span><br /><span style="color: #333333;">Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP</span><br /><span style="color: #333333;"> D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area</span><br /><span style="color: #333333;"> N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br /><span style="color: #333333;"> E1 - OSPF external type 1, E2 - OSPF external type 2</span><br /><span style="color: #333333;"> i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2</span><br /><span style="color: #333333;"> ia - IS-IS inter area, * - candidate default, U - per-user static route</span><br /><span style="color: #333333;"> o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP</span><br /><span style="color: #333333;"> + - replicated route, % - next hop override</span><br /><br /><span style="color: #333333;">Gateway of last resort is not set</span><br /><br /><span style="color: #333333;">192.168.0.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.0.0/24 is directly connected, FastEthernet1/0</span><br /><span style="color: #333333;">L 192.168.0.1/32 is directly connected, FastEthernet1/0</span><br /><span style="color: #333333;"> 192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.1.0/24 is directly connected, FastEthernet1/1</span><br /><span style="color: #333333;">L 192.168.1.1/32 is directly connected, FastEthernet1/1</span></pre><h4><span style="color: #333333;">KONFIGURACJA PROTOKOŁU ROUTINGU OSPF </span></h4><p style="text-align: justify;"><span style="color: #333333;">W celu zapewnienia pełnej łączności między oddziałami ALFA i między oddziałami BETA skonfigurujmy protokół routingu OSPF. Konfiguracja OSPF na routerach ALFA_1, ALFA_HQ, BETA_1, BETA_HQ jest następująca:</span></p><pre><span style="color: #333333;">ALFA_1(config)#router ospf 1</span><br /><span style="color: #333333;">ALFA_1(config-router)#network 192.168.1.0 0.0.0.255 area 0</span><br /><span style="color: #333333;">ALFA_1(config-router)#network 2.2.2.2 0.0.0.0 area 0</span><br /><br /><span style="color: #333333;">ALFA_HQ(config)#router ospf 1</span><br /><span style="color: #333333;">ALFA_HQ(config-router)#network 192.168.0.0 0.0.0.255 area 0</span><br /><span style="color: #333333;">ALFA_HQ(config-router)#network 4.4.4.4 0.0.0.0 area 0</span><br /><br /><span style="color: #333333;">BETA_1(config)#router ospf 1</span><br /><span style="color: #333333;">BETA_1(config-router)#network 192.168.1.0 0.0.0.255 area 0</span><br /><span style="color: #333333;">BETA_1(config-router)#network 3.3.3.3 0.0.0.0 area 0</span><br /><br /><span style="color: #333333;">BETA_HQ(config)#router ospf 1</span><br /><span style="color: #333333;">BETA_HQ(config-router)#network 192.168.0.0 0.0.0.255 area 0</span><br /><span style="color: #333333;">BETA_HQ(config-router)#network 5.5.5.5 0.0.0.0 area 0</span></pre><p style="text-align: justify;"><span style="color: #333333;">Konfiguracja ospf na ISP wymaga skonfigurowania dwóch procesów i przypisania ich do odpowiednich VRFów (VRF ALFA i BETA):</span></p><pre><span style="color: #333333;">ISP(config)#router ospf 1 vrf ALFA</span><br /><span style="color: #333333;">ISP(config-router)#network 192.168.0.0 0.0.0.255 area 0</span><br /><span style="color: #333333;">ISP(config-router)#network 192.168.1.0 0.0.0.255 area 0</span><br /><br /><span style="color: #333333;">ISP(config)#router ospf 2 vrf BETA</span><br /><span style="color: #333333;">ISP(config-router)#network 192.168.0.0 0.0.0.255 area 0</span><br /><span style="color: #333333;">ISP(config-router)#network 192.168.1.0 0.0.0.255 area 0</span></pre><p><span style="color: #333333;">Zobaczmy jak teraz wygląda tablica routingu dla VRF ALFA:</span></p><pre><span style="color: #333333;">ISP#show ip route vrf ALFA</span><br /><br /><span style="color: #333333;">Routing Table: ALFA</span><br /><span style="color: #333333;">Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP</span><br /><span style="color: #333333;"> D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area</span><br /><span style="color: #333333;"> N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br /><span style="color: #333333;"> E1 - OSPF external type 1, E2 - OSPF external type 2</span><br /><span style="color: #333333;"> i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2</span><br /><span style="color: #333333;"> ia - IS-IS inter area, * - candidate default, U - per-user static route</span><br /><span style="color: #333333;"> o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP</span><br /><span style="color: #333333;"> + - replicated route, % - next hop override</span><br /><br /><span style="color: #333333;">Gateway of last resort is not set</span><br /><br /><span style="color: #333333;">2.0.0.0/32 is subnetted, 1 subnets</span><br /><span style="color: #333333;">O 2.2.2.2 [110/2] via 192.168.1.2, 00:01:14, FastEthernet0/1</span><br /><span style="color: #333333;"> 4.0.0.0/32 is subnetted, 1 subnets</span><br /><span style="color: #333333;">O 4.4.4.4 [110/2] via 192.168.0.2, 00:01:14, FastEthernet0/0</span><br /><span style="color: #333333;"> 192.168.0.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.0.0/24 is directly connected, FastEthernet0/0</span><br /><span style="color: #333333;">L 192.168.0.1/32 is directly connected, FastEthernet0/0</span><br /><span style="color: #333333;"> 192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.1.0/24 is directly connected, FastEthernet0/1</span><br /><span style="color: #333333;">L 192.168.1.1/32 is directly connected, FastEthernet0/1</span></pre><p><span style="color: #333333;"> i dla VRF BETA:</span></p><pre><span style="color: #333333;">ISP#show ip route vrf BETA</span><br /><br /><span style="color: #333333;">Routing Table: BETA</span><br /><span style="color: #333333;">Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP</span><br /><span style="color: #333333;"> D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area</span><br /><span style="color: #333333;"> N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br /><span style="color: #333333;"> E1 - OSPF external type 1, E2 - OSPF external type 2</span><br /><span style="color: #333333;"> i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2</span><br /><span style="color: #333333;"> ia - IS-IS inter area, * - candidate default, U - per-user static route</span><br /><span style="color: #333333;"> o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP</span><br /><span style="color: #333333;"> + - replicated route, % - next hop override</span><br /><br /><span style="color: #333333;">Gateway of last resort is not set</span><br /><br /><span style="color: #333333;">3.0.0.0/32 is subnetted, 1 subnets</span><br /><span style="color: #333333;">O 3.3.3.3 [110/2] via 192.168.1.2, 00:00:42, FastEthernet1/1</span><br /><span style="color: #333333;"> 5.0.0.0/32 is subnetted, 1 subnets</span><br /><span style="color: #333333;">O 5.5.5.5 [110/2] via 192.168.0.2, 00:00:42, FastEthernet1/0</span><br /><span style="color: #333333;"> 192.168.0.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.0.0/24 is directly connected, FastEthernet1/0</span><br /><span style="color: #333333;">L 192.168.0.1/32 is directly connected, FastEthernet1/0</span><br /><span style="color: #333333;"> 192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks</span><br /><span style="color: #333333;">C 192.168.1.0/24 is directly connected, FastEthernet1/1</span><br /><span style="color: #333333;">L 192.168.1.1/32 is directly connected, FastEthernet1/1</span></pre><p style="text-align: justify;"><span style="color: #333333;">Widzimy, że obie tablice routingu zawierają to co powinny, czyli trasy do obu oddziałów danej firmy. Przetestujmy czy firma ALFA ma łączność między oddziałami wykonując ping z interfejsu loopback z ALFA_HQ do adresu intefejsu loopback z ALFA_1:</span></p><pre><span style="color: #333333;">Alfa_HQ#ping ip 2.2.2.2 source 4.4.4.4</span><br /><span style="color: #333333;">Type escape sequence to abort.</span><br /><span style="color: #333333;">Sending 5, 100-byte ICMP Echos to 2.2.2.2, timeout is 2 seconds:</span><br /><span style="color: #333333;">Packet sent with a source address of 4.4.4.4</span><br /><span style="color: #333333;">!!!!!</span><br /><span style="color: #333333;">Success rate is 100 percent (5/5), round-trip min/avg/max = 24/66/128 ms</span></pre><p style="text-align: justify;"><span style="color: #333333;">To samo zróbmy dla firmy BETA wykonując ping z interfejsu loopback z BETA_HQ do adresu intefejsu loopback z BETA_1:</span></p><pre><span style="color: #333333;">BETA_HQ#ping ip 3.3.3.3 source 5.5.5.5</span><br /><span style="color: #333333;">Type escape sequence to abort.</span><br /><span style="color: #333333;">Sending 5, 100-byte ICMP Echos to 3.3.3.3, timeout is 2 seconds:</span><br /><span style="color: #333333;">Packet sent with a source address of 5.5.5.5</span><br /><span style="color: #333333;">!!!!!</span><br /><span style="color: #333333;">Success rate is 100 percent (5/5), round-trip min/avg/max = 112/127/148 ms</span></pre><h4><span style="color: #333333;">PODSUMOWANIE</span></h4><p style="text-align: justify;"><span style="color: #333333;">Jak widać na powyższym przykładzie VRFy są idealnym narzędziem do logicznego podzielenia routera na instancje które posiadają osobne tablice routingu. Dzięki VRF możemy współdzielić na jednym routerze sieci o tej samej adresacji odseparowanie od siebie, bez konieczności zmian w adresacji.</span></p></div>
				</div>
				</div>
						</div>
			</div>
		</div>
						</div>
			</div>
		</section>
						</div>
			</div>
		</div>
		]]></content:encoded>
			<wfw:commentRss>https://kubsoo.github.io/rsnet-website/vrf-lite-cisco-podstawy/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
	</channel>
</rss>
